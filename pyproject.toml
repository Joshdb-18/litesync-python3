[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[tool.cibuildwheel]
build = "cp37* cp38* cp39* cp310*"
build-verbosity = 3

[tool.cibuildwheel.linux]
before-build = """
curl -O https://litesync.io/download/litesync-free-linux-x86_64.tar.gz
tar -xzvf litesync-free-linux-x86_64.tar.gz
./install
"""
build = "cp310-manylinux_x86_64, cp39-manylinux_x86_64, cp38-manylinux_x86_64, cp37-manylinux_x86_64"

[tool.cibuildwheel.windows]
before-build = """
from setuptools import setup

curl -O https://litesync.io/download/litesync-free-windows-x86_64.tar.gz
tar -xzvf litesync-free-windows-x86_64.tar.gz
./install.bat

setup(
    name='litesync',
    version='1.0',
    packages=['litesync'],
    package_data={'': ['*.h']},
    include_package_data=True,
    data_files=[('C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.22621.0\\ucrt', ['sqlite3.h', 'sqlite3ext.h'])],
)
"""
skip = "*-win32"

[tool.cibuildwheel.macos]
before-build = """
curl -O https://litesync.io/download/litesync-free-mac-x86_64.tar.gz
tar -xzvf litesync-free-mac-x86_64.tar.gz
./install
"""
